CREATE TABLE users (
userID int NOT NULL AUTO_INCREMENT,
name varchar(60) NOT NULL,
email varchar(60) NOT NULL UNIQUE,
password varchar(60) NOT NULL,
phone varchar(60) NOT NULL,
role varchar(50) NOT NULL,
CONSTRAINT PK_users PRIMARY KEY (userID)
);

CREATE TABLE jobs (
jobID int NOT NULL AUTO_INCREMENT,
title varchar(255) NOT NULL,
description varchar(255) NOT NULL,
company varchar(50) NOT NULL,
salary varchar(50) NOT NULL,
email varchar(50) NOT NULL,
CONSTRAINT PK_jobs PRIMARY KEY (jobID),
CONSTRAINT FK_jobs FOREIGN KEY (email) REFERENCES users(email)
);

CREATE TABLE jobapplication (
  userid int NOT NULL,
  jobid int NOT NULL,
  name varchar(50) NOT NULL,
  email varchar(50) NOT NULL,
  experience text DEFAULT NULL,
  date datetime DEFAULT current_timestamp(),
  CONSTRAINT PK_jobapplication PRIMARY KEY (userid, jobid),
  CONSTRAINT FK_jobapplication_user FOREIGN KEY (userid) REFERENCES users(userid),
  CONSTRAINT FK_jobapplication_jobs FOREIGN KEY (jobid) REFERENCES jobs(jobid)
);

CREATE TABLE jobresult(
resultID int NOT NULL AUTO_INCREMENT,
userID int NOT NULL,
jobID int NOT NULL,
empID int NOT NULL,
jobTitle varchar(50) NOT NULL,
studentName varchar(50) NOT NULL,
employerCompany varchar(50) NOT NULL,
studentEmail varchar(50) NOT NULL,
employerEmail varchar(50) NOT NULL,
CONSTRAINT jobresult_pk PRIMARY KEY (resultID),
CONSTRAINT jobresult_fk FOREIGN KEY (userID) REFERENCES users(userID),
CONSTRAINT jobresult_fk1 FOREIGN KEY (jobID) REFERENCES jobs(jobID)
);

ALTER TABLE jobs
ADD userID int;

ALTER TABLE jobs
ADD CONSTRAINT FK_jobs2 FOREIGN KEY (userID) REFERENCES users(userID);

ALTER TABLE jobapplication
ADD certificate varchar(255) NOT NULL;